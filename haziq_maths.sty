% Mathematics
\usepackage[mathscr]{euscript}  % for \mathscr{ABC}
\usepackage{amsmath}
%\allowdisplaybreaks[1]
\usepackage{amssymb}
\usepackage{amsthm}
\renewcommand\qedsymbol{$\blacksquare$}

\usepackage{thmtools}
\usepackage{thm-restate}
\declaretheoremstyle[
  spaceabove=\parskip,spacebelow=\parskip,bodyfont=\itshape
]{hTheoremStyle}
\declaretheoremstyle[
  spaceabove=\parskip,spacebelow=\parskip
]{hDefinitionStyle}
\declaretheoremstyle[
   headfont=\normalfont\itshape,spaceabove=\parskip,spacebelow=\parskip
]{hRemarkStyle}
\declaretheorem[numberwithin=chapter,style=hTheoremStyle]{theorem} 
\declaretheorem[sibling=theorem,style=hTheoremStyle]{proposition}
\declaretheorem[sibling=theorem,style=hTheoremStyle]{lemma}
\declaretheorem[parent=theorem,style=hTheoremStyle]{corollary}
\declaretheorem[sibling=theorem,style=hTheoremStyle]{conjecture}
\declaretheorem[sibling=theorem,style=hTheoremStyle]{claim}
\declaretheorem[numberwithin=chapter,style=hRemarkStyle]{remark} 
\declaretheorem[numberwithin=chapter,style=hDefinitionStyle]{definition}
\declaretheorem[numberwithin=chapter,style=hDefinitionStyle]{example}

% To remove indentation in the list of theorems & definitions
\renewcommand\listoftheorems[1][]{%
  \bgroup
  \setlisttheoremstyle{#1}%
  \let\listfigurename\listtheoremname
  \def\contentsline##1{%
    \csname thmt@contentsline@##1\endcsname{##1}%
  }%
  \@for\thmt@envname:=\thmt@allenvs\do{%
  \@xa\protected@edef\csname l@\thmt@envname\endcsname{% 
    \@nx\@dottedtocline{1}{0pt}{\@nx\thmt@listnumwidth}% changed from 1.5em to 0pt
  }%
  }%
  \let\thref@starttoc\@starttoc
  \def\@starttoc##1{\thref@starttoc{loe}}%
  \@fileswfalse
  \AtEndDocument{%
    \if@filesw
      \@ifundefined{tf@loe}{%
        \expandafter\newwrite\csname tf@loe\endcsname
        \immediate\openout \csname tf@loe\endcsname \jobname.loe\relax
      }{}%
\fi }%
  \listoffigures
  \egroup
}

\usepackage{dsfont}  % for indicator variables \mathsds{1}
\usepackage{bm}  % for better bold script
\usepackage[makeroom]{cancel}
  \renewcommand{\CancelColor}{\color{lsegry}}
\usepackage{mathtools}
%\usepackage{kbordermatrix}  % https://tex.stackexchange.com/questions/59517/label-rows-of-a-matrix-by-characters

% Retag equations
\newcommand{\retag}[1]{\tag{from \color{black}\ref{#1}}}

% Matrix spacing---https://tex.stackexchange.com/questions/14071/how-can-i-increase-the-line-spacing-in-a-matrix
\makeatletter
\renewcommand*\env@matrix[1][\arraystretch]{%
  \edef\arraystretch{#1}%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{*\c@MaxMatrixCols c}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% MATHS SYMBOLS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Vectors and matrices
\newcommand{\bzero}{{\mathbf 0}}
\newcommand{\bone}{{\mathbf 1}}
\newcommand{\ba}{{\mathbf a}}
\newcommand{\bb}{{\mathbf b}}
\newcommand{\bc}{{\mathbf c}}
\newcommand{\bd}{{\mathbf d}}
\newcommand{\be}{{\mathbf e}}
\newcommand{\bff}{{\mathbf f}}
\newcommand{\bg}{{\mathbf g}}
\newcommand{\bh}{{\mathbf h}}
\newcommand{\bi}{{\mathbf i}}
\newcommand{\bj}{{\mathbf j}}
\newcommand{\bk}{{\mathbf k}}
\newcommand{\bl}{{\mathbf l}}
\newcommand{\bmm}{{\mathbf m}}
\newcommand{\bn}{{\mathbf n}}
\newcommand{\bo}{{\mathbf o}}
\newcommand{\bp}{{\mathbf p}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\br}{{\mathbf r}}
\newcommand{\bs}{{\mathbf s}}
\newcommand{\bt}{{\mathbf t}}
\newcommand{\bu}{{\mathbf u}}
\newcommand{\bv}{{\mathbf v}}
\newcommand{\bw}{{\mathbf w}}
\newcommand{\bx}{{\mathbf x}}
\newcommand{\by}{{\mathbf y}}
\newcommand{\bz}{{\mathbf z}}
\newcommand{\bA}{{\mathbf A}}
\newcommand{\bB}{{\mathbf B}}
\newcommand{\bC}{{\mathbf C}}
\newcommand{\bD}{{\mathbf D}}
\newcommand{\bE}{{\mathbf E}}
\newcommand{\bF}{{\mathbf F}}
\newcommand{\bG}{{\mathbf G}}
\newcommand{\bH}{{\mathbf H}}
\newcommand{\bI}{{\mathbf I}}
\newcommand{\bJ}{{\mathbf J}}
\newcommand{\bK}{{\mathbf K}}
\newcommand{\bL}{{\mathbf L}}
\newcommand{\bM}{{\mathbf M}}
\newcommand{\bN}{{\mathbf N}}
\newcommand{\bO}{{\mathbf O}}
\newcommand{\bP}{{\mathbf P}}
\newcommand{\bQ}{{\mathbf Q}}
\newcommand{\bR}{{\mathbf R}}
\newcommand{\bS}{{\mathbf S}}
\newcommand{\bT}{{\mathbf T}}
\newcommand{\bU}{{\mathbf U}}
\newcommand{\bV}{{\mathbf V}}
\newcommand{\bW}{{\mathbf W}}
\newcommand{\bX}{{\mathbf X}}
\newcommand{\bY}{{\mathbf Y}}
\newcommand{\bZ}{{\mathbf Z}}

\newcommand{\btW}{{\widetilde\bW}}
\newcommand{\btU}{{\widetilde\bU}}

% Greek bold letters
\newcommand{\balpha}{{\bm\alpha}}
\newcommand{\bbeta}{{\bm\beta}}
\newcommand{\bgamma}{{\bm\gamma}}
\newcommand{\bdelta}{{\bm\delta}}
\newcommand{\bepsilon}{{\bm\epsilon}}
\newcommand{\bvarepsilon}{{\bm\varepsilon}}
\newcommand{\bzeta}{{\bm\zeta}}
\newcommand{\bfeta}{{\bm\eta}}
\newcommand{\boldeta}{{\bm\eta}}
\newcommand{\btheta}{{\bm\theta}}
\newcommand{\bvartheta}{{\bm\vartheta}}
\newcommand{\biota}{{\bm\iota}}
\newcommand{\bkappa}{{\bm\kappa}}
\newcommand{\blambda}{{\bm\lambda}}
\newcommand{\bmu}{{\bm\mu}}
\newcommand{\bnu}{{\bm\nu}}
\newcommand{\bxi}{{\bm\xi}}
\newcommand{\bpi}{{\bm\pi}}
\newcommand{\bvarpi}{{\bm\varpi}}
\newcommand{\brho}{{\bm\rho}}
\newcommand{\bvarrho}{{\bm\varrho}}
\newcommand{\bsigma}{{\bm\sigma}}
\newcommand{\bvarsigma}{{\bm\varsigma}}
\newcommand{\btau}{{\bm\tau}}
\newcommand{\bupsilon}{{\bm\upsilon}}
\newcommand{\bphi}{{\bm\phi}}
\newcommand{\bvarphi}{{\bm\varphi}}
\newcommand{\bchi}{{\bm\chi}}
\newcommand{\bpsi}{{\bm\psi}}
\newcommand{\bomega}{{\bm\omega}}

\newcommand{\bGamma}{{\bm\Gamma}}
\newcommand{\bDelta}{{\bm\Delta}}
\newcommand{\bTheta}{{\bm\Theta}}
\newcommand{\bLambda}{{\bm\Lambda}}
\newcommand{\bXi}{{\bm\Xi}}
\newcommand{\bPi}{{\bm\Pi}}
\newcommand{\bSigma}{{\bm\Sigma}}
\newcommand{\bUpsilon}{{\bm\Upsilon}}
\newcommand{\bPhi}{{\bm\Phi}}
\newcommand{\bPsi}{{\bm\Psi}}
\newcommand{\bOmega}{{\bm\Omega}}

% Probability and Statistics
\DeclareMathOperator{\Prob}{P}
\DeclareMathOperator{\E}{E}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\VAR}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\COV}{Cov}
\DeclareMathOperator{\Corr}{Corr}
\DeclareMathOperator{\N}{N}
\DeclareMathOperator{\tN}{{}^tN}
\DeclareMathOperator{\MN}{MN}
\DeclareMathOperator{\Bin}{Bin}
\DeclareMathOperator{\Bern}{Bern}
\DeclareMathOperator{\logit}{logit}
\DeclareMathOperator{\expit}{expit}
\DeclareMathOperator{\Mult}{Mult}
\DeclareMathOperator{\Cat}{Cat}
\DeclareMathOperator{\Pois}{Pois}
\DeclareMathOperator{\Cauchy}{Cauchy}
\DeclareMathOperator{\Exp}{Exp}
\DeclareMathOperator{\hCauchy}{half-Cauchy}
\DeclareMathOperator{\Wis}{Wis}
\DeclareMathOperator{\invWis}{Wis^{\textendash 1}}
\DeclareMathOperator{\LKJ}{LKJ}
\DeclareMathOperator{\Unif}{Unif}
\DeclareMathOperator{\KL}{D_{KL}\hspace{-1pt}}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\ind}{\mathds{1}}
\newcommand{\iid}{\,\overset{\text{iid}}{\sim}\,}
\DeclareMathOperator*{\plim}{plim}
\newcommand{\mlt}{<\!\!<}
\newcommand{\mgt}{>\!\!>}

% Blackboard bold
\newcommand{\bbR}{\mathbb{R}}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbZ}{\mathbb{Z}}
\newcommand{\bbC}{\mathbb{C}}
\newcommand{\bbS}{\mathbb{S}}
\newcommand{\bbH}{\mathbb{H}}
\newcommand{\bbF}{\mathbb{F}}

% Math calligraphic fonts
\newcommand{\cA}{{\mathcal A}}
\newcommand{\cB}{{\mathcal B}}
\newcommand{\cC}{{\mathcal C}}
\newcommand{\cD}{{\mathcal D}}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\cF}{{\mathcal F}}
\newcommand{\cG}{{\mathcal G}}
\newcommand{\cH}{{\mathcal H}}
\newcommand{\cI}{{I}} % !!! decided to change F.I. symbol
\newcommand{\cJ}{{\mathcal J}}
\newcommand{\cK}{{\mathcal K}}
\newcommand{\cL}{{\mathcal L}}
\newcommand{\cM}{{\mathcal M}}
\newcommand{\cN}{{\mathcal N}}
\newcommand{\cO}{{\mathcal O}}
\newcommand{\cP}{{\mathcal P}}
\newcommand{\cQ}{{\mathcal Q}}
\newcommand{\cR}{{\mathcal R}}
\newcommand{\cS}{{\mathcal S}}
\newcommand{\cT}{{\mathcal T}}
\newcommand{\cU}{{\mathcal U}}
\newcommand{\cV}{{\mathcal V}}
\newcommand{\cW}{{\mathcal W}}
\newcommand{\cX}{{\mathcal X}}
\newcommand{\cY}{{\mathcal Y}}
\newcommand{\cZ}{{\mathcal Z}}

% Derivatives and integration
\let\d\relax
\DeclareMathOperator{\dd}{d}
\newcommand{\dint}{\dd\hspace{0.5pt}\!}
\newcommand{\d}{\text{d}}

% Overbrace and underbrace$\!\:\!$
\newcommand{\greyoverbrace}[2]{{\color{lsegry}\overbrace{\color{black}#1}^{#2}}}
\newcommand{\grayoverbrace}[2]{{\color{lsegry}\overbrace{\color{black}#1}^{#2}}}

% Comments grey text
\newcommand{\mycomment}[2][10pt]{\hspace{#1}\rlap{\color{gray}\text{#2}}}

% \obot and \bigobot from the matha and mathx font (from mathabx.sty)
\DeclareFontFamily{U}{matha}{\hyphenchar\font45}
\DeclareFontShape{U}{matha}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * matha
      <10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
      }{}
\DeclareSymbolFont{matha}{U}{matha}{m}{n}
\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathx10
      }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}

\DeclareMathSymbol{\obot}{2}{matha}{"6B}
\DeclareMathSymbol{\bigobot}{1}{mathx}{"CB}

% overbrace and underbrace
\newcommand{\myoverbrace}[3][lsegry]{{\color{#1}\overbrace{\color{black}#2}^{#3}}}
\newcommand{\myunderbrace}[3][lsegry]{{\color{#1}\underbrace{\color{black}#2}_{#3}}}

% Conveniences
\renewcommand{\L}{\text{L}}
\providecommand{\C}{\text{C}}
\newcommand{\const}{\text{const.}\hspace{0.01em}}
\newcommand{\half}[1][1]{\frac{#1}{2}}  % \half for 1/2 or \half[n] for n/2, etc.
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\vecc}{vec}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\BF}{BF}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\ip}{\langle}{\rangle}
\newcommand{\XTX}{\mathbf X^\top \mathbf X}
\newcommand{\new}{{\text{new}}}
\newcommand{\Hlam}{\mathbf H_\lambda}
\newcommand{\blam}{\boldsymbol\lambda}
\newcommand{\Vy}{\mathbf{V}_y}
\newcommand{\wtilde}{\tilde{\mathbf w}}
\newcommand{\Wtilde}{\tilde{\mathbf W}}
\newcommand{\Vtilde}{\tilde{\mathbf V}}
\newcommand{\hXXR}{h:\cX\times\cX\to\bbR}
\newcommand*{\bigcdot}{\raisebox{-0.3ex}{\scalebox{1.15}{$\cdot$}}}
